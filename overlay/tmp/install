#!/bin/sh

set -euo pipefail
export BF_E=`basename ${0}`


#======================================================================================================================
# Get versions.
#======================================================================================================================

cd /tmp

POSTFIX_VERSION=$(cat POSTFIX_VERSION)
bf-debug "Postfix version ${POSTFIX_VERSION}."

CLAMSMTP_VERSION=$(cat CLAMSMTP_VERSION)
bf-debug "Clamsmtp version ${CLAMSMTP_VERSION}."


#======================================================================================================================
# Install Postfix and dependencies.
#======================================================================================================================

bf-echo "Installing Postfix v${POSTFIX_VERSION}..."
apk add --no-cache \
    postfix=${POSTFIX_VERSION} \
    clamsmtp=${CLAMSMTP_VERSION}
bf-done


#======================================================================================================================
# Cleanup.
#======================================================================================================================
